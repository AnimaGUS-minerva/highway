#!/usr/bin/env ruby
APP_PATH = File.expand_path('../../config/application', __FILE__)
require_relative '../config/boot'
require 'openssl'
require 'webrick'
require 'webrick/https'


# THIS IS NEW:
require "rails/commands/server"
module Rails
  class Server
    def default_options
      super.merge({
                    :BindAddress => '::3',
                    :ServerAlias => ['highway-test.sandelman.ca', 'localhost', 'highway.sandelman.ca'],
                    :Port        => 443,
                    :SSLEnable => true,
                    :SSLCertificate => OpenSSL::X509::Certificate.new(File.read('db/cert/masa_secp384r1.crt')),
                    :SSLPrivateKey => OpenSSL::PKey.read(File.read('db/cert/masa_secp384r1.key'))
      })
    end
  end
end

require 'rails/commands'
